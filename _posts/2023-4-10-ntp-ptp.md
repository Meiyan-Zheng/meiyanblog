---
layout: post
title: Comparing NTP with PTP
---

## What is NTP? 

The *Network Time Protocol* (NTP) is a networking protocol for clock synchronization between computer systems 
over networks. NTP is intended to synchronize all participating computers to within a few milliseconds of UTC. 

NTP uses a hierarchical, semi-layered system of time sources. Each level of this hierarchy is termed a `stratum`
and is assigned a number starting with zero for reference clock at the top. A server synchronized to a `stratum n`
server runs at `stratum n + 1`. 

#### Clock strata

<img src="https://user-images.githubusercontent.com/30589773/230826311-a1513df1-c433-4795-923a-c4483ffe6032.png" width = "500" height = "400" alt="Network_Time_Protocol_servers_and_clients svg" align=center />

* Yellow arrorws indicate a direct connection
* Red arrows indicate a network connection


#### How NTP works? 

![image5](https://user-images.githubusercontent.com/30589773/230828797-aba124d4-1685-4aa1-8624-f9f37467c567.png)

The synchronization process is as follows:

- Device A sends Device B an NTP message, which is timestamped when it leaves Device A. The timestamp is 10:00:00 am (T1).
- When this NTP message arrives at Device B, it is timestamped by Device B. The timestamp is 11:00:01 am (T2).
- When the NTP message leaves Device B, Device B timestamps it. The timestamp is 11:00:02 am (T3).
- When Device A receives the NTP message, the local time of Device A is 10:00:03 am (T4).

Up to now, Device A can calculate the following parameters based on the timestamps:

- The roundtrip delay of NTP message: Delay = (T4–T1) – (T3-T2) = 2 seconds.
- Time difference between Device A and Device B: Offset = ((T2-T1) + (T3-T4))/2 = 1 hour.

## What is PTP?



